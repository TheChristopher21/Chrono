/* =========================================================================
   AdminScheduleRulesPageScoped.css · FINAL
   Scope: .schedule-rules-page.scoped-dashboard
   ========================================================================= */

/* ---------- Design Tokens (Light Defaults) ---------- */
.schedule-rules-page.scoped-dashboard {
    --gap-xs: .25rem;
    --gap-sm: .5rem;
    --gap-md: 1rem;
    --gap-lg: 1.5rem;

    --radius-md: 10px;
    --radius-lg: 14px;

    --c-bg: #f5f7fb;
    --c-surface: #f1f5f9;
    --c-card: #ffffff;
    --c-border: #e5e7eb;
    --c-line: #e9edf5;

    --c-text: #111827;
    --c-text-muted: #94a3b8; /* dezenter im Dark-Look */

    --c-primary: #475bff;
    --c-primary-dim: #6b7cff;
    --c-primary-light: #eef2ff;

    --shadow-sm: 0 2px 6px rgba(0,0,0,.06);
    --shadow-card: 0 6px 18px rgba(0,0,0,.08);
    --shadow-int: 0 8px 24px rgba(0,0,0,.12);
}

/* ---------- Dark Mode ---------- */
[data-theme="dark"] .schedule-rules-page.scoped-dashboard {
    --c-bg: #1e2230;
    --c-surface: #22283a;
    --c-card: #2a3044;
    --c-border: #3b425c;
    --c-line: #36405d;

    --c-text: #e5e7eb;
    --c-text-muted: #a0a0b8;

    --c-primary: #6aa6ff;
    --c-primary-dim: #93bfff;
    --c-primary-light: #273753;
}

/* ---------- Page ---------- */
.schedule-rules-page.scoped-dashboard {
    background: var(--c-bg);
    color: var(--c-text);
    min-height: 100dvh;
    padding: var(--gap-lg);
}

.schedule-rules-page.scoped-dashboard .dashboard-header { margin-bottom: var(--gap-lg); }
.schedule-rules-page.scoped-dashboard .dashboard-header h1 { margin: 0 0 var(--gap-sm); font-weight: 800; }
.schedule-rules-page.scoped-dashboard .dashboard-header p { margin: 0; color: var(--c-text-muted); }

/* ---------- Karten-Grid (mit Mindestbreite, kein Quetschen) ---------- */
.schedule-rules-page.scoped-dashboard .rules-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(920px, 1fr)); /* schützt Form vor Overflow */
    gap: var(--gap-lg);
    align-items: start;
}

/* ---------- Karte ---------- */
.schedule-rules-page.scoped-dashboard .rule-card {
    background: var(--c-card);
    border: 1px solid var(--c-border);
    border-radius: var(--radius-lg);
    padding: calc(var(--gap-lg) - .25rem);
    box-shadow: var(--shadow-card);
    min-width: 0;
    overflow: clip;
    box-sizing: border-box;
    transition: box-shadow .2s ease, transform .2s ease, border-color .2s ease;
    container-type: inline-size; /* Container-Queries aktivieren */
}
.schedule-rules-page.scoped-dashboard .rule-card:hover {
    border-color: var(--c-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-int);
}

/* Deaktivierte Regel leicht abtönen */
.schedule-rules-page.scoped-dashboard .rule-card:has(.checkbox-group input:not(:checked)) { opacity: .9; }

/* ---------- Formular-Grid (breit) ---------- */
.schedule-rules-page.scoped-dashboard .form-grid {
    display: grid;
    gap: var(--gap-md);
    grid-template-columns:
    minmax(260px, 2fr)     /* label  */
    minmax(120px, 1fr)     /* key    */
    minmax(120px, 1fr)     /* start  */
    minmax(120px, 1fr)     /* end    */
    110px                  /* active */
    180px;                 /* save   */

    grid-template-areas:
    "label label key start end active"
    ". . . . . actions";
}

.schedule-rules-page.scoped-dashboard .form-grid > .form-group:nth-of-type(1) { grid-area: label; }
.schedule-rules-page.scoped-dashboard .form-grid > .form-group:nth-of-type(2) { grid-area: key; }
.schedule-rules-page.scoped-dashboard .form-grid > .form-group:nth-of-type(3) { grid-area: start; }
.schedule-rules-page.scoped-dashboard .form-grid > .form-group:nth-of-type(4) { grid-area: end; }
.schedule-rules-page.scoped-dashboard .form-grid > .checkbox-group              { grid-area: active; align-self: end; }
.schedule-rules-page.scoped-dashboard .form-grid > .form-group-actions          { grid-area: actions; align-self: end; justify-self: end; width: 100%; }

/* ---------- Labels / Inputs ---------- */
.schedule-rules-page.scoped-dashboard label {
    font-size: .9rem;
    color: var(--c-text-muted);
    font-weight: 600;
    display: block;
    margin-bottom: .35rem;
}

.schedule-rules-page.scoped-dashboard input[type="text"],
.schedule-rules-page.scoped-dashboard input[type="time"] {
    width: 100%;
    min-width: 0;
    padding: .65rem 1rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--c-border);
    background: var(--c-surface);
    color: var(--c-text);
    font-size: 1rem;
    transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
    box-sizing: border-box;
}

/* Zeitfelder – stabil, keine abgeschnittenen Ziffern */
.schedule-rules-page.scoped-dashboard input[type="time"] {
    text-align: center;
    font-variant-numeric: tabular-nums;
    letter-spacing: 0;                /* WICHTIG: sonst verschluckt Chrome Ziffern */
    padding-inline-end: 2.8rem;       /* Platz für das Uhr-Icon rechts */
}
.schedule-rules-page.scoped-dashboard
input[type="time"]::-webkit-datetime-edit { padding: 0 .1rem; }
.schedule-rules-page.scoped-dashboard
input[type="time"]::-webkit-datetime-edit-hour-field,
.schedule-rules-page.scoped-dashboard
input[type="time"]::-webkit-datetime-edit-minute-field,
.schedule-rules-page.scoped-dashboard
input[type="time"]::-webkit-datetime-edit-second-field,
.schedule-rules-page.scoped-dashboard
input[type="time"]::-webkit-datetime-edit-text {
    padding: 0 .05rem;
}
.schedule-rules-page.scoped-dashboard
input[type="time"]::-webkit-calendar-picker-indicator { padding: .25rem; }

/* Key visuell als Kürzel */
.schedule-rules-page.scoped-dashboard .form-grid > .form-group:nth-of-type(2) input[type="text"] {
    text-transform: uppercase;
    letter-spacing: .04em;
    font-weight: 700;
}

/* Fokus */
.schedule-rules-page.scoped-dashboard input:focus {
    outline: none;
    border-color: var(--c-primary);
    box-shadow: 0 0 0 3px var(--c-primary-light);
}

/* Checkbox */
.schedule-rules-page.scoped-dashboard .checkbox-group {
    display: flex;
    align-items: center;
    gap: .6rem;
}
.schedule-rules-page.scoped-dashboard .checkbox-group input[type="checkbox"] {
    width: 20px; height: 20px;
    accent-color: var(--c-primary);
}

/* Buttons */
.schedule-rules-page.scoped-dashboard button,
.schedule-rules-page.scoped-dashboard .add-new-button {
    padding: .75rem 1.15rem;
    font-size: 1rem;
    font-weight: 800;
    border-radius: var(--radius-md);
    border: 1px solid var(--c-border);
    background: var(--c-surface);
    color: var(--c-text);
    cursor: pointer;
    transition: transform .15s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
}
.schedule-rules-page.scoped-dashboard .form-group-actions > button { width: 100%; }
.schedule-rules-page.scoped-dashboard button:hover,
.schedule-rules-page.scoped-dashboard .add-new-button:hover {
    border-color: var(--c-primary);
    background: var(--c-primary);
    color: #fff;
    transform: translateY(-1px);
    box-shadow: var(--shadow-int);
}
.schedule-rules-page.scoped-dashboard .add-new-button {
    margin-top: var(--gap-md);
    display: inline-flex;
    align-items: center;
    gap: .55rem;
    background: var(--c-primary);
    border-color: var(--c-primary);
    color: #fff;
}

/* ---------- Container Queries: bricht innerhalb der Karte sauber um ---------- */
@container (max-width: 860px) {
    .schedule-rules-page.scoped-dashboard .form-grid {
        grid-template-columns: 1.7fr 1fr 1fr;
        grid-template-areas:
      "label label label"
      "key start end"
      "active actions actions";
    }
    .schedule-rules-page.scoped-dashboard .form-group-actions > button { width: auto; }
}
@container (max-width: 620px) {
    .schedule-rules-page.scoped-dashboard .form-grid {
        grid-template-columns: 1fr;
        grid-template-areas:
      "label"
      "key"
      "start"
      "end"
      "active"
      "actions";
    }
    .schedule-rules-page.scoped-dashboard .form-group-actions { justify-self: stretch; }
    .schedule-rules-page.scoped-dashboard .form-group-actions > button { width: 100%; }
}

/* ---------- Viewport-Notbremse (falls Container-Queries nicht greifen) ---------- */
@media (max-width: 1400px) {
    .schedule-rules-page.scoped-dashboard .rules-list {
        grid-template-columns: repeat(auto-fit, minmax(960px, 1fr));
    }
}
